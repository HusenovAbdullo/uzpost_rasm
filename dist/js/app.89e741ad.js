(function(){"use strict";var a={8750:function(a,o,t){var i=t(5130),e=t(6768);function s(a,o,t,i,s,r){const n=(0,e.g2)("router-view");return(0,e.uX)(),(0,e.Wv)(n)}var r={name:"App"},n=t(1241);const l=(0,n.A)(r,[["render",s]]);var h=l,u=t(1387),p=t(4232);const c={class:"login-container"},d={class:"login-box"},g={class:"input-container"},m={key:0};function k(a,o,t,s,r,n){return(0,e.uX)(),(0,e.CE)("div",c,[(0,e.Lk)("div",d,[o[4]||(o[4]=(0,e.Lk)("h1",null,"Kirish sahifasi",-1)),(0,e.Lk)("form",{onSubmit:o[2]||(o[2]=(0,i.D$)(((...a)=>n.login&&n.login(...a)),["prevent"]))},[(0,e.Lk)("div",g,[(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>r.username=a),type:"text",placeholder:"Foydalanuvchi nomi",required:""},null,512),[[i.Jo,r.username]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>r.password=a),type:"password",placeholder:"Parol",required:""},null,512),[[i.Jo,r.password]])]),o[3]||(o[3]=(0,e.Lk)("button",{type:"submit",class:"login-btn"},"Kirish",-1))],32),r.error?((0,e.uX)(),(0,e.CE)("p",m,(0,p.v_)(r.error),1)):(0,e.Q3)("",!0)])])}t(4114);var v={name:"LoginPage",data(){return{username:"",password:"",error:null}},methods:{async login(){try{const a=await fetch("https://trackapi.pochta.uz/api/token/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})});if(!a.ok)throw new Error("Login failed");const o=await a.json();localStorage.setItem("token",o.access),this.$router.push("/dashboard")}catch(a){this.error=a.message}}}};const b=(0,n.A)(v,[["render",k],["__scopeId","data-v-77e3f060"]]);var y=b;const f={class:"dashboard"},q={class:"banner"},S={class:"filters"},P={class:"filter-card"},C=["value"],D={class:"results"},_=["onClick"],z=["src"],L={class:"popup-content"},T=["src"],R={key:0,style:{"margin-top":"8px"}},A={key:0},I={key:1},x={key:2},F={key:3},w={key:4},Q={key:5},B={key:6},X=["href"],E={class:"pagination"},N=["disabled"],U={class:"page-info",style:{color:"#fff"}},$=["disabled"];function O(a,o,t,s,r,n){return(0,e.uX)(),(0,e.CE)("div",f,[(0,e.Lk)("div",q,[o[16]||(o[16]=(0,e.Lk)("h2",null,"GIBRID XATLARINI TOPSHIRILISHINI NAZORAT QILISH DASTURI",-1)),(0,e.Lk)("button",{onClick:o[0]||(o[0]=(...a)=>n.logout&&n.logout(...a)),class:"logout-button"},"Chiqish")]),(0,e.Lk)("div",S,[(0,e.Lk)("div",P,[(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":o[1]||(o[1]=a=>r.localRegion=a),onChange:o[2]||(o[2]=(...a)=>n.updateDistricts&&n.updateDistricts(...a))},o[17]||(o[17]=[(0,e.Fv)('<option value="" data-v-47689bed>Viloyatlar</option><option value="Toshkent shahar" data-v-47689bed>Toshkent shahar</option><option value="Surxondaryo" data-v-47689bed>Surxondaryo</option><option value="Samarqand" data-v-47689bed>Samarqand</option><option value="Buxoro" data-v-47689bed>Buxoro</option><option value="Andijon" data-v-47689bed>Andijon</option><option value="Namangan" data-v-47689bed>Namangan</option><option value="Farg&#39;ona" data-v-47689bed>Farg&#39;ona</option><option value="Jizzax" data-v-47689bed>Jizzax</option><option value="Sirdaryo" data-v-47689bed>Sirdaryo</option><option value="Qashqadaryo" data-v-47689bed>Qashqadaryo</option><option value="Toshkent viloyati" data-v-47689bed>Toshkent viloyati</option><option value="Xorazm" data-v-47689bed>Xorazm</option><option value="Navoiy" data-v-47689bed>Navoiy</option><option value="Qoraqalpog&#39;iston Respublikasi" data-v-47689bed>Qoraqalpog&#39;iston Respublikasi</option>',15)]),544),[[i.u1,r.localRegion]]),(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":o[3]||(o[3]=a=>r.localDistrict=a)},[o[18]||(o[18]=(0,e.Lk)("option",{value:""},"Tumanlar",-1)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.districts,(a=>((0,e.uX)(),(0,e.CE)("option",{key:a,value:a},(0,p.v_)(a),9,C)))),128))],512),[[i.u1,r.localDistrict]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>r.barcode=a),placeholder:"Barcode"},null,512),[[i.Jo,r.barcode]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>r.localFish=a),placeholder:"F.I.SH"},null,512),[[i.Jo,r.localFish]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>r.post_name=a),placeholder:"Aloqa bo'lim"},null,512),[[i.Jo,r.post_name]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[7]||(o[7]=a=>r.date=a),placeholder:"ДД.ММ.РРРР",type:"date"},null,512),[[i.Jo,r.date]]),(0,e.Lk)("button",{onClick:o[8]||(o[8]=(...a)=>n.applyFilter&&n.applyFilter(...a))},"Filterni qo'llash"),(0,e.Lk)("button",{onClick:o[9]||(o[9]=(...a)=>n.goToStatistics&&n.goToStatistics(...a)),style:{"background-color":"green"}},"Statistika")])]),(0,e.Lk)("div",D,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.images,(a=>((0,e.uX)(),(0,e.CE)("div",{key:a.id,class:"image-card",onClick:o=>n.openPopup(a),title:"To‘liq ma’lumotni ko‘rish"},[(0,e.Lk)("img",{src:n.normalizePhoto(a.photo),loading:"lazy",alt:"Image",onError:o[10]||(o[10]=a=>n.onImgError(a))},null,40,z)],8,_)))),128))]),r.showPopup?((0,e.uX)(),(0,e.CE)("div",{key:0,class:"popup",onClick:o[13]||(o[13]=(0,i.D$)(((...a)=>n.closePopup&&n.closePopup(...a)),["self"]))},[(0,e.Lk)("div",L,[(0,e.Lk)("span",{class:"close",onClick:o[11]||(o[11]=(...a)=>n.closePopup&&n.closePopup(...a))},"×"),(0,e.Lk)("img",{src:n.normalizePhoto(r.popupImage),alt:"Popup Image",class:"popup-image",onError:o[12]||(o[12]=a=>n.onImgError(a))},null,40,T),r.popupLoading?((0,e.uX)(),(0,e.CE)("div",R,"Yuklanmoqda...")):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[r.popupData.barcode?((0,e.uX)(),(0,e.CE)("p",A,"Barcode: "+(0,p.v_)(r.popupData.barcode),1)):(0,e.Q3)("",!0),r.popupData.fish?((0,e.uX)(),(0,e.CE)("p",I,"F.I.SH: "+(0,p.v_)(r.popupData.fish),1)):(0,e.Q3)("",!0),r.popupData.region_name?((0,e.uX)(),(0,e.CE)("p",x,"Viloyat: "+(0,p.v_)(r.popupData.region_name),1)):(0,e.Q3)("",!0),r.popupData.district_name?((0,e.uX)(),(0,e.CE)("p",F,"Tuman: "+(0,p.v_)(r.popupData.district_name),1)):(0,e.Q3)("",!0),r.popupData.delivery_date?((0,e.uX)(),(0,e.CE)("p",w,"Sana: "+(0,p.v_)(n.formatDate(r.popupData.delivery_date)),1)):(0,e.Q3)("",!0),r.popupData.post_name?((0,e.uX)(),(0,e.CE)("p",Q,"Aloqa bo'lim: "+(0,p.v_)(r.popupData.post_name),1)):(0,e.Q3)("",!0),r.popupData.street_name?((0,e.uX)(),(0,e.CE)("p",B,"Oluvchi manzili: "+(0,p.v_)(r.popupData.street_name),1)):(0,e.Q3)("",!0),r.popupData.lon&&r.popupData.lat?((0,e.uX)(),(0,e.CE)("a",{key:7,href:`https://yandex.uz/maps/?pt=${r.popupData.lon},${r.popupData.lat}&z=15`,target:"_blank"}," Yetkazilgan manzilni ko'rish ",8,X)):(0,e.Q3)("",!0)],64))])])):(0,e.Q3)("",!0),(0,e.Lk)("div",E,[(0,e.Lk)("button",{onClick:o[14]||(o[14]=a=>n.goToPage(r.currentPage-1)),disabled:!n.hasPrev,class:"pag-button"}," Orqaga ",8,N),(0,e.Lk)("span",U,(0,p.v_)(r.currentPage)+" ... "+(0,p.v_)(r.totalPages),1),(0,e.Lk)("button",{onClick:o[15]||(o[15]=a=>n.goToPage(r.currentPage+1)),disabled:!n.hasNext,class:"pag-button"}," Oldinga ",8,$)])])}var M=t(4373),K=(t(7926),{name:"DashboardPage",props:["fish","region","district"],data(){return{barcode:"",localFish:this.fish||"",localRegion:this.region||this.$route.params.region||"",localDistrict:this.district||this.$route.params.district||"",post_name:"",date:"",images:[],currentPage:1,totalPages:1,showPopup:!1,popupData:{},popupImage:"",popupLoading:!1,itemsPerPage:56,districts:[],is_person:"",isAdmin:!0,imgFallback:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}},computed:{hasPrev(){return this.currentPage>1},hasNext(){return this.currentPage<this.totalPages}},watch:{"$route.params.region"(a){this.localRegion=a||"",this.updateDistricts(),this.applyFilter()},"$route.params.district"(a){this.localDistrict=a||"",this.applyFilter()},"$route.params.fish"(a){this.localFish=a?decodeURIComponent(a):"",this.applyFilter()}},methods:{logout(){localStorage.removeItem("token"),this.$router.push({name:"Login"})},goToStatistics(){this.$router.push("/statistika")},normalizePhoto(a){if(!a)return this.imgFallback;const o=String(a).trim();return/^https?:\/\//i.test(o)?o:o.startsWith("//")?"https:"+o:o.startsWith("trackapi.pochta.uz")?"https://"+o:o.startsWith("/")?"https://trackapi.pochta.uz"+o:"https://trackapi.pochta.uz/"+o.replace(/^\/+/,"")},onImgError(a){a.target.src=this.imgFallback},formatDate(a){try{const o=new Date(a),t=String(o.getDate()).padStart(2,"0"),i=String(o.getMonth()+1).padStart(2,"0"),e=o.getFullYear();return`${t}.${i}.${e}`}catch{return a}},updateDistricts(){"Buxoro"===this.localRegion?this.districts=["Jondor","Buxoro Tuman","Peshku","Qorovulbozor","Buxoro Shahar","G'ijduvon","Shofirkon","Kogon","Olot","Romitan","Vobkent","Qorako'l"]:"Toshkent shahar"===this.localRegion?this.districts=["Bektemir","Chilanzar","Mirabad","Mirzo Ulugbek","Olmazor","Shayhontohur","Sirgali","Uchtepa","Yashnabad","Yangi Hayot","Yunusabad","Yakkasaray"]:"Samarqand"===this.localRegion?this.districts=["Samarqand","Nurobod","Kattaqo'rg'on","Payariq","Samarqand shahri","Pastdarg'om","Ishtixon","Oqdaryo","Narpay","Qo'shhrabot","Urgut","Jomboy","Toyloq","Samarqand tumani","Paxtachi","Bulung'ur","Kattaqo'rg'on tumani"]:"Andijon"===this.localRegion?this.districts=["Izboskan","Oltinko'l","Buloqboshi","Andijon shahri","Jalolquduq","Xo'jaobod","Honobod","Paxtaobod Andijon","Shahrixon","Asaka","Marhamat","Ulug'nor","Baliqchi","Bo'ston","Qo'rg'ontepa"]:"Surxondaryo"===this.localRegion?this.districts=["Sho'rchi","Boysun","Muzrabot","Oltinsoy","Qumqo'rg'on","Jarqo'rg'on","Angor","Bandixon","Sherobod","Termiz","Sariosiyo","Uzun","Qiziriq","Denov"]:"Namangan"===this.localRegion?this.districts=["Namangan shahri","Uychi","Pop","Chust","Yangiqo'rg'on","To'raqo'rg'on","Mingbuloq","Chortoq","Kosonsoy","Namangan Tumani","Uchqo'rg'on","Norin"]:"Farg'ona"===this.localRegion?this.districts=["Dang'ara","Beshariq","Oltiariq","Furqat","Qushtepa","Yozyovon","O'zbekiston tumani","Quvasoy","Quva","Farg'ona shahar","Farg'ona tumani","Toshloq","Rishton","Buvayda","Qo'qon Shahri","Uchko'prik","So'x","Bog'dod","Marg'ilon"]:"Jizzax"===this.localRegion?this.districts=["Mirzacho'l","Jizzax shahri","Sharof Rashidov","G'allaorol","Zomin","Zafarobod","Forish","Paxtakor","Do'stlik","Yangiobod","Arnasoy","Baxmal","Zarbdor"]:"Sirdaryo"===this.localRegion?this.districts=["Oqoltin","Guliston","Dehqonobod Sirdaryo","Sirdaryo tuman","Xovos","Boyovut tumani","Sayxunobod","Sardoba","Mirzaobod"]:"Qashqadaryo"===this.localRegion?this.districts=["Beshkent","Qamashi","G'uzor","Qarshi Shahri","Nishon","Mirishkor","Koson","Yakkabog'","Kitob","Chiroqchi","Kasbi","Muborak","Dehqonobod","Shahrisabz"]:"Toshkent viloyati"===this.localRegion?this.districts=["Olmaliq shahri","Buka","Oqqo'rg'on","Urta Chirchiq","Bekobod shahri","Chirchiq shahri","Ohangaron","Quyi Chirchiq","Bekobod tumani","Toshkent Tuman","Yangiyul shahri","Qibray","Angren Shahri","Parkent","Piskent","Yangiyul tumani","Yuqori Chirchiq","Bostanlik","Chinaz","Zangiota"]:"Xorazm"===this.localRegion?this.districts=["Tuproqqal'a","Xonqa","Urganch Shahri","Shovot","Urganch tumani","Yangibozor","Bog'ot","Qo'shko'pir","Gurlan","Yangiariq","Xiva","Hazorasp"]:"Navoiy"===this.localRegion?this.districts=["Karmana","Konimex","Qiziltepa","Xatirchi","Navoiy Shahri","Uchquduq","Navbahor","Nurota","Zarafshan"]:"Qoraqalpog'iston Respublikasi"===this.localRegion?this.districts=["Ellikqala","Qo'ng'irot","Nukus Shahar","Nukus tumani","Moynoq","Xo'jayli","Beruniy Tumani","Chimboy tumani","Shumanay","Taxtako'pir","Qorao'zak","Amudaryo Tumani","Kegeyli","To'rtko'l","Qanliko'l"]:this.districts=[],this.localDistrict="",this.$route.params.district&&this.districts.includes(this.$route.params.district)&&(this.localDistrict=this.$route.params.district)},async fetchData(){try{const a=localStorage.getItem("token"),o=Math.max(0,this.currentPage-1),{data:t}=await M.A.get("https://trackapi.pochta.uz/api/show_photos/users/",{headers:{Authorization:`Bearer ${a}`},params:{barcode:this.barcode,fish:this.localFish,region:this.localRegion,district:this.localDistrict,post_name:this.post_name,delivery_date:this.date,is_person:this.is_person,page:o,page_size:this.itemsPerPage}});this.images=Array.isArray(t.images)?t.images:[];const i=Number(t.total_pages),e=Number(t.count);this.totalPages=Number.isFinite(i)&&i>0?i:Math.max(1,Math.ceil((Number.isFinite(e)?e:0)/this.itemsPerPage)),Number.isFinite(Number(t.current_page))?this.currentPage=Math.min(Math.max(1,Number(t.current_page)+1),this.totalPages):this.currentPage=Math.min(Math.max(1,this.currentPage),this.totalPages),this.isAdmin=!!t.admin}catch(a){401===a?.response?.status?this.logout():console.error("Error fetching data:",a)}},applyFilter(){this.currentPage=1,this.fetchData(),window.scrollTo({top:0,behavior:"smooth"})},goToPage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a,this.fetchData(),window.scrollTo({top:0,behavior:"smooth"}))},async openPopup(a){this.popupImage=a?.photo||"",this.popupData={},this.popupLoading=!0,this.showPopup=!0;try{const o=localStorage.getItem("token"),t=`https://trackapi.pochta.uz/api/show_photos/users/${a.id}`,{data:i}=await M.A.get(t,{headers:{Authorization:`Bearer ${o}`}});this.popupData=i||{},i?.photo&&(this.popupImage=i.photo)}catch(o){401===o?.response?.status?this.logout():console.error("Error fetching detail:",o)}finally{this.popupLoading=!1}},closePopup(){this.showPopup=!1,this.popupData={},this.popupImage="",this.popupLoading=!1}},mounted(){this.localRegion=this.$route.params.region||this.region||"",this.updateDistricts(),this.$route.params.district&&(this.localDistrict=this.$route.params.district),this.$route.params.fish&&(this.localFish=decodeURIComponent(this.$route.params.fish)),this.fetchData()}});const j=(0,n.A)(K,[["render",O],["__scopeId","data-v-47689bed"]]);var Y=j;const J={id:"app",style:{margin:"20px"}},V={key:0,class:"loading-overlay"},G={key:1},H=["onClick"],Z={class:"bold-text region-name"},W={class:"bold-text percentage"},aa=["onClick"],oa={key:1},ta=["onClick"],ia={class:"bold-text region-name"},ea={class:"bold-text percentage"},sa=["onClick"],ra={key:1},na={class:"bold-text region-name"},la={class:"bold-text percentage"},ha=["onClick"];function ua(a,o,t,s,r,n){return(0,e.uX)(),(0,e.CE)("div",J,[(0,e.Lk)("h1",{style:{color:"#fff",cursor:"pointer"},onClick:o[0]||(o[0]=(...a)=>n.goToDashboard&&n.goToDashboard(...a))}," Statistika "),r.loading?((0,e.uX)(),(0,e.CE)("div",V,o[1]||(o[1]=[(0,e.Lk)("p",null,"Ma'lumotlar yuklanmoqda...",-1)]))):((0,e.uX)(),(0,e.CE)("div",G,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.sortedRegions,((a,o)=>((0,e.uX)(),(0,e.CE)("div",{key:a.id},[null===r.activeRegion||r.activeRegion===a.id?((0,e.uX)(),(0,e.CE)("div",{key:0,class:"region",onClick:o=>n.toggleRegion(a.id)},[(0,e.Lk)("div",{class:"circle",style:(0,p.Tr)({backgroundColor:n.getGradientColor(o,n.sortedRegions.length)})},null,4),(0,e.Lk)("span",Z,(0,p.v_)(a.name),1),(0,e.Lk)("span",W,(0,p.v_)(n.formatPercentage(a.similarity_percentage)),1),(0,e.Lk)("button",{onClick:(0,i.D$)((o=>n.viewRegion(a.name)),["stop"]),class:"view-button"},"Rasmlarni ko'rish",8,aa)],8,H)):(0,e.Q3)("",!0),r.activeRegion===a.id?((0,e.uX)(),(0,e.CE)("div",oa,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.sortedDistricts(a.id),((o,t)=>((0,e.uX)(),(0,e.CE)("div",{key:o.id},[null===r.activeDistrict||r.activeDistrict===o.id?((0,e.uX)(),(0,e.CE)("div",{key:0,class:"district",onClick:a=>n.toggleDistrict(o.id)},[(0,e.Lk)("div",{class:"circle",style:(0,p.Tr)({backgroundColor:n.getGradientColor(t,r.districts[a.id]?.length||0)})},null,4),(0,e.Lk)("span",ia,(0,p.v_)(o.name),1),(0,e.Lk)("span",ea,(0,p.v_)(n.formatPercentage(o.similarity_percentage)),1),(0,e.Lk)("button",{onClick:(0,i.D$)((t=>n.viewDistrict(a.name,o.name)),["stop"]),class:"view-button"},"Rasmlarni ko'rish",8,sa)],8,ta)):(0,e.Q3)("",!0),r.activeDistrict===o.id?((0,e.uX)(),(0,e.CE)("div",ra,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.sortedFishes(o.id),((t,s)=>((0,e.uX)(),(0,e.CE)("div",{key:t.fish,class:"fish"},[(0,e.Lk)("div",{class:"circle",style:(0,p.Tr)({backgroundColor:n.getGradientColor(s,r.fishes[o.id]?.length||0)})},null,4),(0,e.Lk)("span",na,(0,p.v_)(t.fish),1),(0,e.Lk)("span",la,(0,p.v_)(n.formatPercentage(t.similarity_percentage)),1),(0,e.Lk)("button",{onClick:(0,i.D$)((i=>n.viewFish(a.name,o.name,t.fish)),["stop"]),class:"view-button"},"Rasmlarni ko'rish",8,ha)])))),128))])):(0,e.Q3)("",!0)])))),128))])):(0,e.Q3)("",!0)])))),128))]))])}var pa={name:"RegionStatistics",data(){return{regions:[],districts:{},fishes:{},loading:!0,activeRegion:null,activeDistrict:null}},computed:{sortedRegions(){return[...this.regions].sort(((a,o)=>a.similarity_percentage-o.similarity_percentage))}},methods:{async fetchDistricts(a){if(!this.districts[a]){const o=localStorage.getItem("token"),t=await fetch(`https://trackapi.pochta.uz/api/region/${a}/districts/`,{headers:{Authorization:`Bearer ${o}`}}),i=await t.json();this.districts[a]=i}},async fetchFishes(a){if(!this.fishes[a]){const o=localStorage.getItem("token"),t=await fetch(`https://trackapi.pochta.uz/api/district/${a}/fish-with-similarity/`,{headers:{Authorization:`Bearer ${o}`}}),i=await t.json();this.fishes[a]=i}},sortedDistricts(a){return this.districts[a]?[...this.districts[a]].sort(((a,o)=>a.similarity_percentage-o.similarity_percentage)):[]},sortedFishes(a){return this.fishes[a]?[...this.fishes[a]].sort(((a,o)=>a.similarity_percentage-o.similarity_percentage)):[]},formatPercentage(a){return`${a.toFixed(3)} %`},getGradientColor(a,o){const t=[0,255,0],i=[255,0,0],e=a/(o-1),s=t.map(((a,o)=>Math.round(a+(i[o]-a)*e)));return`rgb(${s[0]}, ${s[1]}, ${s[2]})`},async toggleRegion(a){this.activeRegion===a?(this.activeRegion=null,this.activeDistrict=null):(this.activeRegion=a,this.activeDistrict=null,await this.fetchDistricts(a))},async toggleDistrict(a){this.activeDistrict===a?this.activeDistrict=null:(this.activeDistrict=a,await this.fetchFishes(a))},viewRegion(a){window.open(`https://foto.pochta.uz/dashboard/${encodeURIComponent(a)}`,"_blank")},viewDistrict(a,o){window.open(`https://foto.pochta.uz/dashboard/${encodeURIComponent(a)}/${encodeURIComponent(o)}`,"_blank")},viewFish(a,o,t){window.open(`https://foto.pochta.uz/dashboard/${encodeURIComponent(a)}/${encodeURIComponent(o)}/${encodeURIComponent(t)}`,"_blank")},goToDashboard(){window.location.href="https://foto.pochta.uz/dashboard"}},async mounted(){try{const a=localStorage.getItem("token"),o=await fetch("https://trackapi.pochta.uz/api/regions/",{headers:{Authorization:`Bearer ${a}`}});this.regions=await o.json()}catch(a){console.error("Error fetching regions:",a)}finally{this.loading=!1}}};const ca=(0,n.A)(pa,[["render",ua],["__scopeId","data-v-55378758"]]);var da=ca;const ga={class:"dashboard"},ma={class:"banner"},ka={class:"filters"},va={class:"filter-card"},ba=["value"],ya={class:"results"},fa=["onClick"],qa=["src"],Sa={class:"popup-content"},Pa=["src"],Ca={class:"pagination"},Da=["disabled"],_a={class:"page-info"},za=["disabled"];function La(a,o,t,s,r,n){return(0,e.uX)(),(0,e.CE)("div",ga,[(0,e.Lk)("div",ma,[o[16]||(o[16]=(0,e.Lk)("h2",null,"GIBRID XATLARINI TOPSHIRILISHINI NAZORAT QILISH DASTURI",-1)),(0,e.Lk)("button",{onClick:o[0]||(o[0]=(...a)=>n.logout&&n.logout(...a)),class:"logout-button"},"Chiqish")]),(0,e.Lk)("div",ka,[(0,e.Lk)("div",va,[(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":o[1]||(o[1]=a=>r.region=a),onChange:o[2]||(o[2]=(...a)=>n.updateDistricts&&n.updateDistricts(...a))},o[17]||(o[17]=[(0,e.Fv)('<option value="" data-v-a76a8be0>Viloyatlar</option><option value="Toshkent shahar" data-v-a76a8be0>Toshkent shahar</option><option value="Surxondaryo" data-v-a76a8be0>Surxondaryo</option><option value="Samarqand" data-v-a76a8be0>Samarqand</option><option value="Buxoro" data-v-a76a8be0>Buxoro</option><option value="Andijon" data-v-a76a8be0>Andijon</option><option value="Namangan" data-v-a76a8be0>Namangan</option><option value="Farg&#39;ona" data-v-a76a8be0>Farg&#39;ona</option><option value="Jizzax" data-v-a76a8be0>Jizzax</option><option value="Sirdaryo" data-v-a76a8be0>Sirdaryo</option><option value="Qashqadaryo" data-v-a76a8be0>Qashqadaryo</option><option value="Toshkent viloyati" data-v-a76a8be0>Toshkent viloyati</option><option value="Xorazm" data-v-a76a8be0>Xorazm</option><option value="Navoiy" data-v-a76a8be0>Navoiy</option><option value="Qoraqalpog&#39;iston Respublikasi" data-v-a76a8be0> Qoraqalpog&#39;iston Respublikasi </option>',15)]),544),[[i.u1,r.region]]),(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":o[3]||(o[3]=a=>r.district=a)},[o[18]||(o[18]=(0,e.Lk)("option",{value:""},"Tumanlar",-1)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.districts,(a=>((0,e.uX)(),(0,e.CE)("option",{key:a,value:a},(0,p.v_)(a),9,ba)))),128))],512),[[i.u1,r.district]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>r.barcode=a),placeholder:"Barcode"},null,512),[[i.Jo,r.barcode]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>r.fish=a),placeholder:"F.I.SH"},null,512),[[i.Jo,r.fish]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>r.post_name=a),placeholder:"Aloqa bo'lim"},null,512),[[i.Jo,r.post_name]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[7]||(o[7]=a=>r.date=a),placeholder:"ДД.ММ.РРРР",type:"date"},null,512),[[i.Jo,r.date]]),(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":o[8]||(o[8]=a=>r.is_person=a)},o[19]||(o[19]=[(0,e.Lk)("option",{value:""},"Haqiqiyligini tekshirish",-1),(0,e.Lk)("option",{value:"True"},"Xato",-1),(0,e.Lk)("option",{value:"False"},"To'g'ri",-1)]),512),[[i.u1,r.is_person]]),(0,e.Lk)("button",{onClick:o[9]||(o[9]=(...a)=>n.applyFilter&&n.applyFilter(...a))},"Filterni qo'llash"),(0,e.Lk)("button",{onClick:o[10]||(o[10]=(...a)=>n.goToStatistics&&n.goToStatistics(...a)),style:{"background-color":"green"}},"Statistika")])]),(0,e.Lk)("div",ya,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.images,(a=>((0,e.uX)(),(0,e.CE)("div",{key:a.barcode,class:"image-card",onClick:o=>n.openPopup(a)},[(0,e.Lk)("img",{src:`https://trackapi.pochta.uz/${a.photo}`,alt:"Image"},null,8,qa)],8,fa)))),128))]),r.showPopup?((0,e.uX)(),(0,e.CE)("div",{key:0,class:"popup",onClick:o[13]||(o[13]=(0,i.D$)(((...a)=>n.closePopup&&n.closePopup(...a)),["self"]))},[(0,e.Lk)("div",Sa,[(0,e.Lk)("span",{class:"close",onClick:o[11]||(o[11]=(...a)=>n.closePopup&&n.closePopup(...a))},"×"),(0,e.Lk)("img",{src:`https://trackapi.pochta.uz/${r.popupData.photo}`,alt:"Popup Image",onClick:o[12]||(o[12]=(...a)=>n.toggleFullScreen&&n.toggleFullScreen(...a)),class:"popup-image image-container"},null,8,Pa),(0,e.Lk)("p",null,"Barcode: "+(0,p.v_)(r.popupData.barcode),1),(0,e.Lk)("p",null,"F.I.SH: "+(0,p.v_)(r.popupData.fish),1),(0,e.Lk)("p",null,"Viloyat: "+(0,p.v_)(r.popupData.region__name),1),(0,e.Lk)("p",null,"Tuman: "+(0,p.v_)(r.popupData.district__name),1),(0,e.Lk)("p",null,"Sana: "+(0,p.v_)(r.popupData.delivery_date),1),(0,e.Lk)("p",null,"Aloqa bo'lim: "+(0,p.v_)(r.popupData.post_name),1),(0,e.Lk)("p",null,"Oluvchi manzili: "+(0,p.v_)(r.popupData.street_name),1)])])):(0,e.Q3)("",!0),(0,e.Lk)("div",Ca,[(0,e.Lk)("button",{onClick:o[14]||(o[14]=a=>n.goToPage(r.currentPage-1)),disabled:!r.previous,class:"pag-button"}," Orqaga ",8,Da),(0,e.Lk)("span",_a,(0,p.v_)(r.currentPage)+" ... "+(0,p.v_)(r.totalPages),1),(0,e.Lk)("button",{onClick:o[15]||(o[15]=a=>n.goToPage(r.currentPage+1)),disabled:!r.next,class:"pag-button"}," Oldinga ",8,za)])])}var Ta={name:"DashboardPage",data(){return{barcode:"",fish:this.fish||"",region:this.region||"",district:this.district||"",post_name:"",date:"",images:[],currentPage:1,totalPages:1,next:null,previous:null,showPopup:!1,popupData:{},itemsPerPage:200,districts:[],is_person:""}},beforeRouteEnter(a,o,t){const i=localStorage.getItem("token");i?t():t({name:"Login"})},methods:{logout(){localStorage.removeItem("token"),this.$router.push({name:"Login"})},goToStatistics(){this.$router.push("/statistika")},updateDistricts(){"Buxoro"===this.region?this.districts=["Jondor","Buxoro Tuman","Peshku","Qorovulbozor","Buxoro Shahar","G'ijduvon","Shofirkon","Kogon","Olot","Romitan","Vobkent","Qorako'l"]:"Toshkent shahar"===this.region?this.districts=["Bektemir","Chilanzar","Mirabad","Mirzo Ulugbek","Olmazor","Shayhontohur","Sirgali","Uchtepa","Yashnabad","Yangi Hayot","Yunusabad","Yakkasaray"]:"Samarqand"===this.region?this.districts=["Samarqand","Nurobod","Kattaqo'rg'on","Payariq","Samarqand shahri","Pastdarg'om","Ishtixon","Oqdaryo","Narpay","Qo'shhrabot","Urgut","Jomboy","Toyloq","Samarqand tumani","Paxtachi","Bulung'ur","Kattaqo'rg'on tumani"]:"Andijon"===this.region?this.districts=["Izboskan","Oltinko'l","Buloqboshi","Andijon shahri","Jalolquduq","Xo'jaobod","Honobod","Paxtaobod Andijon","Shahrixon","Asaka","Marhamat","Ulug'nor","Baliqchi","Bo'ston","Qo'rg'ontepa"]:"Surxondaryo"===this.region?this.districts=["Sho'rchi","Boysun","Muzrabot","Oltinsoy","Qumqo'rg'on","Jarqo'rg'on","Angor","Bandixon","Sherobod","Termiz","Sariosiyo","Uzun","Qiziriq","Denov"]:"Namangan"===this.region?this.districts=["Namangan shahri","Uychi","Pop","Chust","Yangiqo'rg'on","To'raqo'rg'on","Mingbuloq","Chortoq","Kosonsoy","Namangan Tumani","Uchqo'rg'on","Norin"]:"Farg'ona"===this.region?this.districts=["Dang'ara","Beshariq","Oltiariq","Furqat","Qushtepa","Yozyovon","O'zbekiston tumani","Quvasoy","Quva","Farg'ona shahar","Farg'ona tumani","Toshloq","Rishton","Buvayda","Qo'qon Shahri","Uchko'prik","So'x","Bog'dod","Marg'ilon"]:"Jizzax"===this.region?this.districts=["Mirzacho'l","Jizzax shahri","Sharof Rashidov","G'allaorol","Zomin","Zafarobod","Forish","Paxtakor","Do'stlik","Yangiobod","Arnasoy","Baxmal","Zarbdor"]:"Sirdaryo"===this.region?this.districts=["Oqoltin","Guliston","Dehqonobod Sirdaryo","Sirdaryo tuman","Xovos","Boyovut tumani","Sayxunobod","Sardoba","Mirzaobod"]:"Qashqadaryo"===this.region?this.districts=["Beshkent","Qamashi","G'uzor","Qarshi Shahri","Nishon","Mirishkor","Koson","Yakkabog'","Kitob","Chiroqchi","Kasbi","Muborak","Dehqonobod","Shahrisabz"]:"Toshkent viloyati"===this.region?this.districts=["Olmaliq shahri","Buka","Oqqo'rg'on","Urta Chirchiq","Bekobod shahri","Chirchiq shahri","Ohangaron","Quyi Chirchiq","Bekobod tumani","Toshkent Tuman","Yangiyul shahri","Qibray","Angren Shahri","Parkent","Piskent","Yangiyul tumani","Yuqori Chirchiq","Bostanlik","Chinaz","Zangiota"]:"Xorazm"===this.region?this.districts=["Tuproqqal'a","Xonqa","Urganch Shahri","Shovot","Urganch tumani","Yangibozor","Bog'ot","Qo'shko'pir","Gurlan","Yangiariq","Xiva","Hazorasp"]:"Navoiy"===this.region?this.districts=["Karmana","Konimex","Qiziltepa","Xatirchi","Navoiy Shahri","Uchquduq","Navbahor","Nurota","Zarafshan"]:"Qoraqalpog'iston Respublikasi"===this.region?this.districts=["Ellikqala","Qo'ng'irot","Nukus Shahar","Nukus tumani","Moynoq","Xo'jayli","Beruniy Tumani","Chimboy tumani","Shumanay","Taxtako'pir","Qorao'zak","Amudaryo Tumani","Kegeyli","To'rtko'l","Qanliko'l"]:this.districts=[],this.district=""},async fetchData(a={}){try{const o=localStorage.getItem("token"),t=await M.A.get("https://trackapi.pochta.uz/api/show_photos/users/",{headers:{Authorization:`Bearer ${o}`},params:{barcode:a.barcode||this.barcode,fish:a.fish||this.fish,region:a.region||this.region,district:a.district||this.district,post_name:a.post_name||this.post_name,delivery_date:a.date||this.date,is_person:a.is_person||this.is_person,page:this.currentPage,page_size:this.itemsPerPage}});this.images=t.data.results.images,this.totalPages=Math.ceil(t.data.count/this.itemsPerPage),this.next=t.data.next,this.previous=t.data.previous}catch(o){o.response&&401===o.response.status?this.logout():console.error("Error fetching data:",o)}},applyFilter(){this.currentPage=1,this.fetchData()},goToPage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a,this.fetchData())},openPopup(a){this.popupData=a,this.showPopup=!0},closePopup(){this.showPopup=!1,this.popupData={}},toggleFullScreen(){const a=document.querySelector(".popup-image");a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}},mounted(){this.fetchData()}};const Ra=(0,n.A)(Ta,[["render",La],["__scopeId","data-v-a76a8be0"]]);var Aa=Ra;const Ia=[{path:"/",name:"Login",component:y},{path:"/dashboard/:region",name:"DashboardRegion",component:Y,props:!0},{path:"/dashboard/:region/:district?",name:"DashboardRegionDistrict",component:Y,props:!0},{path:"/dashboard/:region/:district/:fish?",name:"Dashboard",component:Y,props:!0},{path:"/dashboard",name:"Dashboarda",component:Y,props:!0},{path:"/statistika",name:"Statistika",component:da},{path:"/dashboard1/:fish?/:region?/:district?",name:"Dashboard1",component:Aa,props:!0}],xa=(0,u.aE)({history:(0,u.LA)("/"),routes:Ia});var Fa=xa;const wa=(0,i.Ef)(h);wa.use(Fa),wa.mount("#app")}},o={};function t(i){var e=o[i];if(void 0!==e)return e.exports;var s=o[i]={exports:{}};return a[i].call(s.exports,s,s.exports,t),s.exports}t.m=a,function(){var a=[];t.O=function(o,i,e,s){if(!i){var r=1/0;for(u=0;u<a.length;u++){i=a[u][0],e=a[u][1],s=a[u][2];for(var n=!0,l=0;l<i.length;l++)(!1&s||r>=s)&&Object.keys(t.O).every((function(a){return t.O[a](i[l])}))?i.splice(l--,1):(n=!1,s<r&&(r=s));if(n){a.splice(u--,1);var h=e();void 0!==h&&(o=h)}}return o}s=s||0;for(var u=a.length;u>0&&a[u-1][2]>s;u--)a[u]=a[u-1];a[u]=[i,e,s]}}(),function(){t.n=function(a){var o=a&&a.__esModule?function(){return a["default"]}:function(){return a};return t.d(o,{a:o}),o}}(),function(){t.d=function(a,o){for(var i in o)t.o(o,i)&&!t.o(a,i)&&Object.defineProperty(a,i,{enumerable:!0,get:o[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){t.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)}}(),function(){t.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){var a={524:0};t.O.j=function(o){return 0===a[o]};var o=function(o,i){var e,s,r=i[0],n=i[1],l=i[2],h=0;if(r.some((function(o){return 0!==a[o]}))){for(e in n)t.o(n,e)&&(t.m[e]=n[e]);if(l)var u=l(t)}for(o&&o(i);h<r.length;h++)s=r[h],t.o(a,s)&&a[s]&&a[s][0](),a[s]=0;return t.O(u)},i=self["webpackChunkrasm"]=self["webpackChunkrasm"]||[];i.forEach(o.bind(null,0)),i.push=o.bind(null,i.push.bind(i))}();var i=t.O(void 0,[504],(function(){return t(8750)}));i=t.O(i)})();
//# sourceMappingURL=app.89e741ad.js.map